import y from"./CWQe4z1K.js";import{f as _,a as C,i as x}from"./BPPg7b5u.js";import{j as v,t as o,v as n,N as g,O as w,x as a,y as f,z as $,L as m,r as h,o as N,G as k,P}from"./CE4qlkm1.js";const j={class:"flex w-full gap-3 max-h-[30px]"},I={class:"flex bg-[#1f1f1f] rounded-[8px] h-[32px] gap-3 p-2 text-white justify-between items-center"},L=["title"],S={class:"min-w-[18px] max-w-[18px] h-[18px] flex items-center justify-center"},T={__name:"UIFilters",setup(F){const p=v(()=>_().filters);function r(c){_().removeFilter(c)}return(c,d)=>{const s=y;return o(),n("div",j,[(o(!0),n(g,null,w(m(p),l=>(o(),n("div",null,[a("div",I,[a("div",{class:"truncate",title:l},f(l)+" "+f(l.length),9,L),a("div",S,[$(s,{name:"carbon:close-large",class:"text-white text-[18px] hover:cursor-pointer hover:bg-rose-800",onClick:e=>r(l)},null,8,["onClick"])])])]))),256))])}}},B={class:"flex flex-col gap-3 max-h-[calc(100vh-130px)]"},M={class:"flex max-h-[360px] xl:max-w-[400px] sm:max-w-[200px] min-w-[250px] flex flex-col gap-1"},O={class:"xl:max-w-[400px] min-w-[250px] max-h-[360px] min-h-[330px] sm:max-w-[240px] border border-[#444746] rounded-xl"},z=["src","onClick"],A={class:"flex justify-center items-center w-full"},E={class:"h-[30px] text-white truncate"},V={__name:"pictures",setup(F){const p=C(),r=v(()=>p.path),c=x();async function d(t){x().loading=!0,await $fetch(`http://127.0.0.1:8050/GetMeta?Path=${r.value+"/"+t.Name}`).then(i=>{x().loading=!1,c.setItem({Content:t.Content,Name:t.Name,Tags:i.Tags})})}const s=h(null),l=h(0);N(()=>{s.value.addEventListener("scroll",()=>{if(Math.floor(s.value.scrollHeight-s.value.scrollTop-s.value.clientHeight)<=1&&s.value.scrollTop!=0){if(e.value.length==l.value)return;l.value=e.value.length,$fetch(`http://127.0.0.1:8050/Files?Count=20&Offset=${e.value.length}&Path=${r.value}&Ftype=Image`).then(t=>{t.Files&&(e.value=[...e.value,...t.Files])})}})});const e=h([]);return k(()=>r.value,async t=>{e.value=[],$fetch(`http://127.0.0.1:8050/Files?Count=20&Offset=0&Path=${t}&Ftype=Image`).then(i=>{e.value=i.Files})},{immediate:!0}),(t,i)=>{const b=T;return o(),n("div",B,[$(b),a("div",{ref_key:"itemsRef",ref:s,class:"mx-auto flex gap-4 flex-wrap overflow-y-auto scrollbar max-h-[calc(100%-100px)] min-h-[370px] w-full"},[(o(!0),n(g,null,w(m(e),u=>(o(),n("div",M,[a("div",O,[a("img",{class:P(["w-full h-full object-cover rounded-xl hover:cursor-pointer",{"border-[3px] border-[#8a060e]":u.Name==m(c).item.Name}]),src:`data:image/jpg;base64, ${u.Content}`,onClick:G=>d(u)},null,10,z)]),a("div",A,[a("p",E,f(u.Name),1)])]))),256))],512)])}}};export{V as default};
