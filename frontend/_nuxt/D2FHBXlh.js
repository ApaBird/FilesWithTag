import x from"./BYrctK8w.js";import{a as g}from"./BZxdLVon.js";import y from"./DowhyldE.js";import{j as h,r as m,G as w,o as F,v as l,x as r,L as n,z as u,M as C,N as k,O as $,t as a,y as b}from"./D3j1fDI6.js";import"./r0uc5sRC.js";const j={class:"h-screen flex flex-col gap-4 overflow-hidden"},N={class:"max-h-[220px] min-h-[100px] overflow-y-auto scrollbar"},P={class:"grid grid-cols-6 gap-4 mr-2"},B={class:"flex w-[30px]"},O=r("p",null,"Назад",-1),V=["onClick"],A={class:"flex w-[30px]"},I=["title"],T={__name:"index",setup(L){const c=g(),i=h(()=>c.path),d=m({});async function _(){d.value=await $fetch("http://127.0.0.1:8050/OsTree").then(e=>e)}const v=h(()=>{if(d.value.content)return f([d.value],i.value)});function f(e,o){for(let t=0;t<e.length;t++){if(e[t].dir===o)return e[t].content;if(e[t].content.length>0){let s=f(e[t].content,o);if(s)return s}}}const p=m([]);return w(()=>i.value,async e=>{p.value=[],$fetch(`http://127.0.0.1:8050/Files?Count=20&Offset=0&Path=${e}&Ftype=Image`).then(o=>{p.value=o.Files})}),F(async()=>{await _()}),(e,o)=>{const t=x;return a(),l("div",j,[r("div",N,[r("div",P,[n(i)!="C:/"?(a(),l("div",{key:0,class:"p-4 h-[40px] rounded-[8px] text-white flex justify-start items-center bg-[#1f1f1f] hover:cursor-pointer hover:bg-[#444746]",onClick:o[0]||(o[0]=s=>n(c).setPath(n(i).split("/").slice(0,-1).join("/")))},[r("div",B,[u(t,{name:"simple-line-icons:action-undo",style:{color:"white"}})]),O])):C("",!0),(a(!0),l(k,null,$(n(v),s=>(a(),l("div",{class:"h-[40px] rounded-[8px] min-h-[40px] text-white flex justify-start items-center bg-[#1f1f1f] hover:cursor-pointer hover:bg-[#444746] p-4",onClick:M=>n(c).setPath(s.dir)},[r("div",A,[u(t,{name:"simple-line-icons:folder-alt",style:{color:"white"}})]),r("p",{class:"truncate",title:s.name},b(s.name),9,I)],8,V))),256))])]),u(y,{itemsFolder:n(p)},null,8,["itemsFolder"])])}}};export{T as default};
